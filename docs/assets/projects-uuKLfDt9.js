import"./nav-bar-DKg1tGoi.js";class c extends HTMLElement{constructor(){super(),this.loadingEl=document.createElement("div"),this.loadingEl.className="projects-grid-status",this.loadingEl.textContent="Loading projects...",this.gridEl=document.createElement("section"),this.gridEl.className="projects-grid-grid",this.gridEl.hidden=!0,this.errorEl=document.createElement("div"),this.errorEl.className="projects-grid-status",this.errorEl.hidden=!0,this.appendChild(this.loadingEl),this.appendChild(this.gridEl),this.appendChild(this.errorEl);const e=window.location.hostname.includes("github.io"),t=window.location.hostname.includes("onrender.com");this.apiUrl=e?"https://portfolio-awnu.onrender.com/api/projects":t?"/api/projects":"http://localhost:2000/api/projects"}connectedCallback(){this.load()}async load(){this._setLoading(!0);try{const e=await fetch(this.apiUrl,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json(),i=Array.isArray(t.projects)?t.projects:[];this.render(i),this._setLoading(!1)}catch(e){this._setLoading(!1),this._showError(`Could not load projects: ${e.message}`)}}_setLoading(e){if(this.loadingEl.hidden=!e,e)for(this.errorEl.hidden=!0,this.gridEl.hidden=!0;this.gridEl.firstChild;)this.gridEl.removeChild(this.gridEl.firstChild)}_showError(e){this.errorEl.textContent=e,this.errorEl.hidden=!1,this.gridEl.hidden=!0}render(e){for(;this.gridEl.firstChild;)this.gridEl.removeChild(this.gridEl.firstChild);if(!e.length){const t=document.createElement("p");t.className="projects-grid-desc",t.textContent="No projects found.",this.gridEl.appendChild(t),this.gridEl.hidden=!1;return}for(const t of e){const i=document.createElement("article");i.className="projects-grid-card";const s=document.createElement("img");if(s.className="projects-grid-media",s.alt=(t?.name||"Project")+" thumbnail",t?.img){const a="/Portfolio/";s.src=t.img.startsWith("http")?t.img:`${a}${t.img}`}const r=document.createElement("div");r.className="projects-grid-body";const d=document.createElement("div");d.className="projects-grid-meta";const o=document.createElement("span");o.className="projects-grid-chip",o.textContent=t?.year||"",d.appendChild(o);const n=document.createElement("h3");n.className="projects-grid-title",n.textContent=t?.name||"Untitled Project";const l=document.createElement("p");l.className="projects-grid-desc",l.textContent=t?.desc||"",r.append(d,n,l),i.append(s,r),this.gridEl.appendChild(i)}this.gridEl.hidden=!1}}customElements.define("projects-grid",c);
